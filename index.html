<script>
  // ðŸ”¹ Firebase Config
  const firebaseConfig = { 
    apiKey: "AIzaSyBwj_as6pb5Bg81F9Cl9VWTKkekMM9Exfk",
    authDomain: "pekora-forum.firebaseapp.com",
    projectId: "pekora-forum",
    storageBucket: "pekora-forum.firebasestorage.app",
    messagingSenderId: "161910967859",
    appId: "1:161910967859:web:6a28cecaae74b9b7e9dd46",
    measurementId: "G-BPBTW5KBRK"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  let currentUser = null;
  let currentChatUser = null;
  let unsubscribeChat = null;

  // ... ðŸ”¹ (aquÃ­ sigue todo el cÃ³digo que ya tienes) ...

  // ðŸ”¹ Admin
  async function addItem(){
    const name = document.getElementById("itemName").value;
    const img = document.getElementById("itemImg").value;
    const price = parseInt(document.getElementById("itemPrice").value);
    const value = parseInt(document.getElementById("itemValue").value);
    const stock = parseInt(document.getElementById("itemStock").value);
    await db.collection("items").doc(name).set({ name, img, price, value, stock });
    alert("Item agregado");
    loadAdmin();
  }

  async function loadAdmin(){
    const panel = document.getElementById("adminPanel");
    panel.style.display = "block";
    const cont = document.getElementById("adminItems");
    cont.innerHTML = "";
    const snap = await db.collection("items").get();
    snap.forEach(doc=>{
      const item = doc.data();
      cont.innerHTML += `
        <div class="item">
          <img src="${item.img}" width="50"> ${item.name} (Stock: ${item.stock})
          <button class="btn btn-delete" onclick="deleteItem('${doc.id}')">X</button>
        </div>`;
    });
  }

  async function deleteItem(id){
    await db.collection("items").doc(id).delete();
    loadAdmin();
  }

  function closeAdmin(){ document.getElementById("adminPanel").style.display="none"; }

  // ðŸ”¹ Atajo con tecla INSERT para abrir/cerrar Admin Panel
  document.addEventListener("keydown", (e)=>{
    if(e.key === "Insert"){
      const panel = document.getElementById("adminPanel");
      if(panel.style.display === "block"){
        closeAdmin();
      } else {
        loadAdmin();
      }
    }
  });

  // ðŸ”¹ Mantener login si estaba guardado
  window.onload = function(){
    const u = localStorage.getItem("currentUser");
    if(u){ currentUser = u; startApp(); }
  }
</script>
